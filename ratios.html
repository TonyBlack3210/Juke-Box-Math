<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ratio Rancher - Mr. Black</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; margin: 0; background: linear-gradient(135deg, #f59e0b, #1e293b); color: white; min-height: 100vh; text-align: center; }
        .nav-header { text-align: left; padding: 20px; }
        .home-btn { text-decoration: none; background: white; color: #f59e0b; padding: 10px 20px; border-radius: 8px; font-weight: bold; display: inline-block; }
        .container { max-width: 1100px; margin: 0 auto; padding: 0 20px 40px; }
        .music-card { background: rgba(30, 41, 59, 0.8); padding: 20px; border-radius: 20px; margin-bottom: 25px; border: 1px solid rgba(255, 255, 255, 0.2); }
        .song-grid { display: grid; grid-template-columns: repeat(10, 1fr); gap: 8px; }
        .song-btn { background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.3); color: white; padding: 8px 2px; border-radius: 6px; cursor: pointer; font-size: 0.7rem; }
        .card { background: white; color: #1e293b; padding: 35px; border-radius: 20px; box-shadow: 0 20px 50px rgba(0, 0, 0, 0.4); margin-top: 20px; }
        .problem-area { background: #fffbeb; padding: 25px; border-radius: 15px; border-left: 10px solid #f59e0b; margin-bottom: 20px; }
        .visualizer { margin: 20px 0; padding: 20px; background: #f8fafc; border-radius: 12px; font-size: 1.1rem; line-height: 2.2; border: 2px dashed #f59e0b; display: none; color: #1e293b; }
        input { padding: 15px; width: 100px; font-size: 1.4rem; border: 2px solid #ddd; border-radius: 10px; text-align: center; margin: 0 10px; }
        .btn { padding: 12px 30px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; background: #f59e0b; color: white; font-size: 1.1rem; margin: 10px 5px; }
        .feedback { margin-top: 20px; font-size: 1.4rem; font-weight: bold; min-height: 1.6em; }
        #question-text { font-size: 1.5rem; line-height: 1.6; color: #1e293b; }
    </style>
</head>
<body>
    <div class="nav-header"><a href="index.html" class="home-btn">üè† RETURN TO HOME</a></div>
    
    <div class="container">
        <div class="music-card">
            <h3 style="margin-top: 0;">üéµ Jukebox (Ratio Mode)</h3>
            <div class="song-grid">
                <button class="song-btn" onclick="play('47b2f7ff-f1e3-4986-85ab-97338cd3498b')">One Bridge</button>
                <button class="song-btn" onclick="play('61c91f78-3939-43f5-8f3c-ccd91ff8b5be')">We Are Four</button>
                <button class="song-btn" onclick="play('4282a1af-2643-4b56-ac82-df7d3a9aba6d')">Kaleidoscope</button>
                <button class="song-btn" onclick="play('ea4d0635-52e6-4093-b778-1473a71e4955')">Water Falls</button>
                <button class="song-btn" onclick="play('030ef937-79a4-40c1-9abe-cfc476de6394')">Lightning</button>
                <button class="song-btn" onclick="play('520371ca-47c7-43ac-9ae4-62db0453c7c9')">Am I Next</button>
                <button class="song-btn" onclick="play('399f28e5-3306-4487-96b0-387e8bf510e9')">Truth In Lie</button>
                <button class="song-btn" onclick="play('0cbcc357-3cad-4bba-8fc9-863f260b0f75')">Chef Killer</button>
                <button class="song-btn" onclick="play('c6da2095-d224-4847-a662-f4c4cc982d39')">You Da Craze</button>
                <button class="song-btn" onclick="play('f45e3a38-cb2d-4bd1-9208-af8e8ff8637e')">Type of Man</button>
                <button class="song-btn" onclick="play('507de0a4-6912-45ae-801e-b7c62ba9e439')">Rhyme Clap</button>
                <button class="song-btn" onclick="play('528ad8cd-4832-4c82-8143-fddb4e4d62ea')">Herpes</button>
                <button class="song-btn" onclick="play('dc24bb02-998e-4178-aa51-5d4cdcfa0c92')">Questions</button>
                <button class="song-btn" onclick="play('5c4b035c-168a-4b26-896f-0d33f19d6f5a')">Fun With You</button>
                <button class="song-btn" onclick="play('1591ce81-8223-4879-8b8d-deb40bcd62f7')">SIMP v3</button>
                <button class="song-btn" onclick="play('c9bc732a-3b25-4ece-a0af-852647174bc4')">Delusional</button>
                <button class="song-btn" onclick="play('1cbf18d4-ec23-494c-a3b6-0019fdb466e0')">Chitty Bang</button>
                <button class="song-btn" onclick="play('150d1923-d2a2-432a-9523-b37d18a5e40b')">Eyes to Mtn</button>
                <button class="song-btn" onclick="play('76fc8a34-d416-407a-9cc0-a711f35986f1')">Pee-Pee Girl</button>
                <button class="song-btn" onclick="play('e665a160-0dc2-45ec-857c-8a3821c92db9')">Unity</button>
            </div>
        </div>

        <div class="card">
            <h1>ü§† Ratio Rancher</h1>
            <div class="problem-area">
                <div id="question-text">Generating challenge...</div>
            </div>

            <div class="input-group">
                üêà Cats: <input type="number" id="ans-cats"> 
                üêï Dogs: <input type="number" id="ans-dogs">
            </div>

            <button class="btn" onclick="check()">Submit Order</button>
            <button class="btn" style="background: #64748b;" onclick="toggleVisual()">Visual Hint</button>
            <button class="btn" style="background: #94a3b8;" onclick="generate()">New Challenge</button>
            
            <div id="feedback" class="feedback"></div>
            <div id="visual-box" class="visualizer"></div>
        </div>
    </div>

    <script>
        let musicWindow = null;
        function play(id) {
            const url = "https://suno.com/song/" + id;
            if (musicWindow && !musicWindow.closed) musicWindow.location.href = url;
            else musicWindow = window.open(url, "MathPlayer", "width=500,height=700");
            musicWindow.focus();
        }

        let prob = {};
        function generate() {
            const r1 = Math.floor(Math.random() * 3) + 1; 
            const r2 = Math.floor(Math.random() * 3) + 2; 
            const groupSize = r1 + r2;
            const mult = Math.floor(Math.random() * 11) + 5; 
            const total = groupSize * mult;

            prob = { r1, r2, mult, groupSize, total };

            document.getElementById('question-text').innerHTML = `If there are <b>${r1} cats</b> for every <b>${r2} dogs</b>, and there are <b>${total} animals</b> (cats and dogs) total... <br><br><b>How many are cats and how many are dogs?</b>`;
            
            document.getElementById('visual-box').style.display = "none";
            document.getElementById('feedback').innerText = "";
            document.getElementById('ans-cats').value = "";
            document.getElementById('ans-dogs').value = "";
        }

        function toggleVisual() {
            const box = document.getElementById('visual-box');
            if (box.style.display === "block") {
                box.style.display = "none";
                return;
            }
            box.style.display = "block";
            let html = `<b>Grouping Strategy:</b> Each group has ${prob.r1} üêà and ${prob.r2} üêï (Total: ${prob.groupSize} animals).<br>`;
            for(let i=0; i < prob.mult; i++) {
                html += `[ ${"üêà".repeat(prob.r1)}${"üêï".repeat(prob.r2)} ] `;
            }
            box.innerHTML = html + `<br><br><b>Count 'em up:</b> There are <b>${prob.mult}</b> groups of ${prob.groupSize} to reach ${prob.total}!`;
        }

        function check() {
            const c = document.getElementById('ans-cats').value;
            const d = document.getElementById('ans-dogs').value;
            const feed = document.getElementById('feedback');
            
            if (c == prob.r1 * prob.mult && d == prob.r2 * prob.mult) {
                feed.innerText = "‚úÖ That's right! Great job.";
                feed.style.color = "green";
                setTimeout(generate, 3000);
            } else {
                feed.innerText = "‚ùå Not quite. Use the Visual Hint to see the groups!";
                feed.style.color = "red";
            }
        }

        window.onload = generate;
        document.addEventListener("keyup", (e) => { if (e.key === "Enter") check(); });
    </script>
</body>
</html>
